<app-loader *ngIf="isLoading"></app-loader>

<div class="layout">
  <div class="btn-container">
    <button mat-raised-button color="primary" class="add-contact-btn" (click)="openContactModal()">
      <mat-icon> contacts</mat-icon>
      ADD CONTACT</button>
  </div>

  <div class="table-container">
    <table mat-table [dataSource]="contactsDataSource" class="mat-elevation-z8">
      <ng-container matColumnDef="name">
        <th mat-header-cell *matHeaderCellDef>
          Name
        </th>
        <td mat-cell *matCellDef="let contact">
          <span>
            {{contact.name }}
          </span>
        </td>
      </ng-container>
      <ng-container matColumnDef="phone">
        <th mat-header-cell *matHeaderCellDef>
          Phone
        </th>
        <td mat-cell *matCellDef="let contact">
          <span>
            {{contact.phone }}
          </span>
        </td>
      </ng-container>
      <ng-container matColumnDef="email">
        <th mat-header-cell *matHeaderCellDef>
          Email
        </th>
        <td mat-cell *matCellDef="let contact">
          <span>
            {{contact.email }}
          </span>
        </td>
      </ng-container>
      <ng-container matColumnDef="department">
        <th mat-header-cell *matHeaderCellDef>
          Department
        </th>
        <td mat-cell *matCellDef="let contact">
          <span>
            {{contact.department }}
          </span>
        </td>
      </ng-container>
      <ng-container matColumnDef="company">
        <th mat-header-cell *matHeaderCellDef>
          Company
        </th>
        <td mat-cell *matCellDef="let contact">
          <span>
            {{contact.company }}
          </span>
        </td>
      </ng-container>
      <ng-container matColumnDef="address">
        <th mat-header-cell *matHeaderCellDef>
          Address
        </th>
        <td mat-cell *matCellDef="let contact">
          <span>
            {{contact.address }}
          </span>
        </td>
      </ng-container>
      <ng-container matColumnDef="note">
        <th mat-header-cell *matHeaderCellDef>
          Note
        </th>
        <td mat-cell *matCellDef="let contact">
          <span *ngIf="contact.note">
            <mat-icon matTooltip='{{contact.note }}'>info</mat-icon>
          </span>
        </td>
      </ng-container>
      <ng-container matColumnDef="button">
        <th mat-header-cell *matHeaderCellDef>
        </th>
        <td mat-cell *matCellDef="let contact">
          <div class="custom-w">
            <button matTooltip="Edit contact" class="" mat-flat-button (click)="editContact(contact)">
              <mat-icon [color]="'primary'">edit</mat-icon>
            </button>
            <button class="" matTooltip="Delete contact" mat-flat-button (click)="deleteContact(contact)">
              <mat-icon [color]="'warn'">delete</mat-icon>
            </button>
          </div>
        </td>
      </ng-container>
      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row *matRowDef="let contact; columns: displayedColumns;"></tr>
    </table>
    <mat-paginator [pageSizeOptions]="[10, 20, 50]" showFirstLastButtons [pageSize]="pageSize || 10" [length]="tableSize" (page)="getContactsData()">
    </mat-paginator>
  </div>
  <span *ngIf="!(contactsDataSource && contactsDataSource.data && contactsDataSource.data.length)">Няма намерени
    резултати</span>
</div>
